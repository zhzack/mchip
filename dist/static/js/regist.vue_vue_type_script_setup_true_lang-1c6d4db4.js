import{M as a}from"./motion-2fbe5c48.js";import{m as x}from"./message-19a66385.js";import{u as m,a as b}from"./verifyCode-ed03e18d.js";import{t as V,$ as d,a9 as k}from"./index-1d030a9b.js";import{u as i}from"./hooks-8128b668.js";import{L as g}from"./lock-fill-b073b399.js";import{I as U}from"./iphone-377eaa66.js";import{U as R}from"./user-3-fill-92dead6a.js";const S={class:"w-full flex justify-between"},A=Vue.defineComponent({__name:"regist",setup(P){const{t:r}=VueI18n.useI18n(),p=Vue.ref(!1),n=Vue.ref(!1),o=Vue.reactive({username:"",phone:"",verifyCode:"",password:"",repeatPassword:""}),c=Vue.ref(),{isDisabled:C,text:w}=m(),_=[{validator:(s,e,t)=>{e===""?t(new Error(V(d("login.passwordSureReg")))):o.password!==e?t(new Error(V(d("login.passwordDifferentReg")))):t()},trigger:"blur"}],h=async s=>{n.value=!0,s&&await s.validate((e,t)=>{if(e)p.value?setTimeout(()=>{x(V(d("login.registerSuccess")),{type:"success"}),n.value=!1},2e3):(n.value=!1,x(V(d("login.tickPrivacy")),{type:"warning"}));else return n.value=!1,t})};function N(){m().end(),k().SET_CURRENTPAGE(0)}return(s,e)=>{const t=Vue.resolveComponent("el-input"),l=Vue.resolveComponent("el-form-item"),f=Vue.resolveComponent("el-button"),y=Vue.resolveComponent("el-checkbox"),v=Vue.resolveComponent("el-form");return Vue.openBlock(),Vue.createBlock(v,{ref_key:"ruleFormRef",ref:c,model:o,rules:Vue.unref(b),size:"large"},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(a),null,{default:Vue.withCtx(()=>[Vue.createVNode(l,{rules:[{required:!0,message:Vue.unref(V)(Vue.unref(d)("login.usernameReg")),trigger:"blur"}],prop:"username"},{default:Vue.withCtx(()=>[Vue.createVNode(t,{clearable:"",modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=u=>o.username=u),placeholder:Vue.unref(r)("login.username"),"prefix-icon":Vue.unref(i)(Vue.unref(R))},null,8,["modelValue","placeholder","prefix-icon"])]),_:1},8,["rules"])]),_:1}),Vue.createVNode(Vue.unref(a),{delay:100},{default:Vue.withCtx(()=>[Vue.createVNode(l,{prop:"phone"},{default:Vue.withCtx(()=>[Vue.createVNode(t,{clearable:"",modelValue:o.phone,"onUpdate:modelValue":e[1]||(e[1]=u=>o.phone=u),placeholder:Vue.unref(r)("login.phone"),"prefix-icon":Vue.unref(i)(Vue.unref(U))},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),Vue.createVNode(Vue.unref(a),{delay:150},{default:Vue.withCtx(()=>[Vue.createVNode(l,{prop:"verifyCode"},{default:Vue.withCtx(()=>[Vue.createElementVNode("div",S,[Vue.createVNode(t,{clearable:"",modelValue:o.verifyCode,"onUpdate:modelValue":e[2]||(e[2]=u=>o.verifyCode=u),placeholder:Vue.unref(r)("login.smsVerifyCode"),"prefix-icon":Vue.unref(i)("ri:shield-keyhole-line")},null,8,["modelValue","placeholder","prefix-icon"]),Vue.createVNode(f,{disabled:Vue.unref(C),class:"ml-2",onClick:e[3]||(e[3]=u=>Vue.unref(m)().start(c.value,"phone"))},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(Vue.unref(w).length>0?Vue.unref(w)+Vue.unref(r)("login.info"):Vue.unref(r)("login.getVerifyCode")),1)]),_:1},8,["disabled"])])]),_:1})]),_:1}),Vue.createVNode(Vue.unref(a),{delay:200},{default:Vue.withCtx(()=>[Vue.createVNode(l,{prop:"password"},{default:Vue.withCtx(()=>[Vue.createVNode(t,{clearable:"","show-password":"",modelValue:o.password,"onUpdate:modelValue":e[4]||(e[4]=u=>o.password=u),placeholder:Vue.unref(r)("login.password"),"prefix-icon":Vue.unref(i)(Vue.unref(g))},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),Vue.createVNode(Vue.unref(a),{delay:250},{default:Vue.withCtx(()=>[Vue.createVNode(l,{rules:_,prop:"repeatPassword"},{default:Vue.withCtx(()=>[Vue.createVNode(t,{clearable:"","show-password":"",modelValue:o.repeatPassword,"onUpdate:modelValue":e[5]||(e[5]=u=>o.repeatPassword=u),placeholder:Vue.unref(r)("login.sure"),"prefix-icon":Vue.unref(i)(Vue.unref(g))},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),Vue.createVNode(Vue.unref(a),{delay:300},{default:Vue.withCtx(()=>[Vue.createVNode(l,null,{default:Vue.withCtx(()=>[Vue.createVNode(y,{modelValue:p.value,"onUpdate:modelValue":e[6]||(e[6]=u=>p.value=u)},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(Vue.unref(r)("login.readAccept")),1)]),_:1},8,["modelValue"]),Vue.createVNode(f,{link:"",type:"primary"},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(Vue.unref(r)("login.privacyPolicy")),1)]),_:1})]),_:1})]),_:1}),Vue.createVNode(Vue.unref(a),{delay:350},{default:Vue.withCtx(()=>[Vue.createVNode(l,null,{default:Vue.withCtx(()=>[Vue.createVNode(f,{class:"w-full",size:"default",type:"primary",loading:n.value,onClick:e[7]||(e[7]=u=>h(c.value))},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(Vue.unref(r)("login.definite")),1)]),_:1},8,["loading"])]),_:1})]),_:1}),Vue.createVNode(Vue.unref(a),{delay:400},{default:Vue.withCtx(()=>[Vue.createVNode(l,null,{default:Vue.withCtx(()=>[Vue.createVNode(f,{class:"w-full",size:"default",onClick:N},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(Vue.unref(r)("login.back")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])}}});export{A as _};
